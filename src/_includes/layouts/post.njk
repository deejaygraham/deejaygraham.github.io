{% extends 'layouts/base.njk' %}

{% block precontent %}

{% if thumbnail %} 

<section class="hero">
  <figure class="image">
    <img src="{{ thumbnail }}" alt="{{ title }}">
  </figure>
</section>

{% endif %}

{% endblock %}

{% block content %}

<section class="section">
	<div class="content is-medium">
		<nav class="level is-mobile article-tags" id="article-meta">
		{% if tags %}
			<div class="level-left">
  			{% for tag in tags %}
   			{% set tagUrl %}/tags/{{ tag | slugify }}/{% endset %}
				<span class="tag level-item"><a href="{{ tagUrl }}">{{ tag }}</a></span> 
  			{% endfor %}
			</div>
  		{% endif %}
			<div class="level-right">
				<span class="date"><time datetime="{{ page.date | dateISO }}">{{ page.date | dateFull }}</time></span>
			</div>	
		</nav>
  		<h1 class="title is-1">{{ title }}</h1>
    		{{ content | safe }}
  	</div>
</section>

{% endblock %}

{% block postcontent %}

{% if tags %}
<section class="section">
  {% set relatedTag = tags | randomItem %}
  {% if collections[relatedTag].length > 1 %}
  <aside>
    <div class="related-posts>
      <h3 class="is-size-3">More posts tagged with #{{ relatedTag }}</h3>
      <ul>
      {% set related = collections[relatedTag] | excludePost(page) | limit(6) %}
      {% for item in related %}
        <li><a title="read {{ item.data.title }}" href="{{ item.url }}">{{ item.data.title }}</a></li>
      {% endfor %}
      </ul>
    </div>
  </aside>
  {% endif %}
</section>
{% endif %}

{% endblock %}
